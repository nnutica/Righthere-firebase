<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Firebasemauiapp.CommunityPage.CommunityPage"
             Title="CommunityPage">
    <!-- Background image layer + content -->
    <Grid RowDefinitions="*">
        <Image Source="commubg.png"
               Aspect="AspectFill"
               Opacity="1"
               AutomationId="CommunityBackground"/>
        <!-- Foreground content -->
        <Grid>
            <!-- Add bottom white rounded strip under TabBar -->
            <Grid RowDefinitions="*,32">
                <!-- Original content in top row -->
                <Grid Grid.Row="0">
                    <VerticalStackLayout>
                        <Grid RowDefinitions="Auto,*"
                              Padding="16">
                            <!-- Header -->
                            <Grid Grid.Row="0"
                                  ColumnDefinitions="*,Auto"
                                  Padding="0,0,0,8">
                                <Label Text="Community"
                                       FontSize="22"
                                       FontAttributes="Bold"
                                       TextColor="#3A3A3A"/>
                            </Grid>
                            <Image
                                Grid.Row="1"
                                Source="commuboard.png"
                                BackgroundColor="Transparent"
                                WidthRequest="240"
                                HeightRequest="240"
                                HorizontalOptions="Center"
                                VerticalOptions="Start"
                                Margin="0,390,0,0">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnOpenCommunityPopupTapped"/>
                                </Image.GestureRecognizers>
                            </Image>
                        </Grid>
                    </VerticalStackLayout>

                    <!-- Floating Action Button for Create Post (ImageButton) -->
                    <ImageButton Source="addpost.png"
                                 BackgroundColor="Transparent"
                                 WidthRequest="60"
                                 HeightRequest="60"
                                 Aspect="AspectFit"
                                 HorizontalOptions="End"
                                 VerticalOptions="End"
                                 Margin="20,20,20,80"
                                 Clicked="OnCreatePostTapped">
                        <ImageButton.Shadow>
                            <Shadow Brush="Black"
                                    Offset="2,2"
                                    Radius="8"
                                    Opacity="0.3"/>
                        </ImageButton.Shadow>
                    </ImageButton>
                </Grid>

                <!-- Bottom white rounded strip -->
                <Border Grid.Row="1"
                        BackgroundColor="White"
                        StrokeThickness="0"
                        TranslationY="8">
                    <Border.Shadow>
                        <Shadow Brush="Black"
                                Opacity="0.18"
                                Radius="14"
                                Offset="0,-2"/>
                    </Border.Shadow>
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="28,28,0,0"/>
                    </Border.StrokeShape>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</ContentPage>