<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Firebasemauiapp.CommunityPage.CommunityPage"
             Title="CommunityPage"
             BackgroundImageSource="commubg.png">
    <!-- Add bottom white rounded strip under TabBar -->
    <Grid RowDefinitions="*,32">
        <!-- Original content in top row -->
        <Grid Grid.Row="0">
            <VerticalStackLayout>
                <Grid RowDefinitions="Auto,Auto,*"
                      Padding="16">
                    <!-- Header -->
                    <Grid Grid.Row="0"
                          ColumnDefinitions="*,Auto"
                          Padding="0,0,0,8">
                        <Label Text="Community"
                               FontSize="22"
                               FontAttributes="Bold"
                               TextColor="#3A3A3A"/>
                        <Label Grid.Column="1"
                               Text="{Binding UserName}"
                               FontSize="14"
                               VerticalOptions="Center"
                               TextColor="#666"
                               Margin="10,0,0,0"/>
                    </Grid>
                    <Image
                        Grid.Row="1"
                        Source="commuboard.png"
                        BackgroundColor="Transparent"
                        WidthRequest="200"
                        HeightRequest="200"
                        HorizontalOptions="Start"
                        VerticalOptions="End">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnOpenCommunityPopupTapped"/>
                        </Image.GestureRecognizers>
                    </Image>
                </Grid>
            </VerticalStackLayout>

            <!-- Floating Action Button for Create Post (ImageButton) -->
            <ImageButton Source="addpost.png"
                         BackgroundColor="Transparent"
                         WidthRequest="60"
                         HeightRequest="60"
                         Aspect="AspectFit"
                         HorizontalOptions="End"
                         VerticalOptions="End"
                         Margin="20,20,20,80"
                         Clicked="OnCreatePostTapped">
                <ImageButton.Shadow>
                    <Shadow Brush="Black"
                            Offset="2,2"
                            Radius="8"
                            Opacity="0.3"/>
                </ImageButton.Shadow>
            </ImageButton>
        </Grid>

        <!-- Bottom white rounded strip -->
        <Border Grid.Row="1"
                BackgroundColor="White"
                StrokeThickness="0"
                TranslationY="8">
            <Border.Shadow>
                <Shadow Brush="Black"
                        Opacity="0.18"
                        Radius="14"
                        Offset="0,-2"/>
            </Border.Shadow>
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="28,28,0,0"/>
            </Border.StrokeShape>
        </Border>
    </Grid>
</ContentPage>