<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="Firebasemauiapp.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Firebasemauiapp.Pages"
    xmlns:main="clr-namespace:Firebasemauiapp.Mainpages"
    xmlns:quest="clr-namespace:Firebasemauiapp.QuestPage"
    xmlns:community="clr-namespace:Firebasemauiapp.CommunityPage"
    Title="Firebasemauiapp"
    FlyoutBehavior="Disabled">

    <!-- Authentication Pages (No Tabs) -->
    <ShellContent
        x:Name="signin"
        Title="Sign In"
        ContentTemplate="{DataTemplate pages:SignInView}"
        Route="signin"/>
    <ShellContent
        Title="Sign Up"
        ContentTemplate="{DataTemplate pages:SignUpView}"
        Route="signup"/>
    <ShellContent
        Title="Summary"
        ContentTemplate="{DataTemplate main:SummaryView}"
        Route="summary"/>


    <!-- Main App with TabBar -->
    <TabBar Route="main"
            CurrentItem="{x:Reference homeTab}">

        <Tab Title="Quests"
             Icon="quest.png">
            <ShellContent
                Title="Quests"
                ContentTemplate="{DataTemplate quest:QuestPage}"
                Route="quests"/>
        </Tab>

        <Tab Title="Diary"
             Icon="diary.png">
            <ShellContent
                Title="Diary"
                ContentTemplate="{DataTemplate main:DiaryView}"
                Route="diary"/>
            <ShellContent
                Title="History"
                ContentTemplate="{DataTemplate main:DiaryHistory}"
                Route="history"/>
        </Tab>



        <Tab x:Name="homeTab"
             Route="home"
             Title="Home"
             Icon="home.png">
            <ShellContent
                Title="Home"
                ContentTemplate="{DataTemplate main:StarterView}"
                Route="starter"
                Shell.FlyoutBehavior="Flyout"/>
        </Tab>

        <Tab Title="Community"
             Icon="community_icon.png">
            <ShellContent
                Title="Community"
                ContentTemplate="{DataTemplate community:CommunityPage}"
                Route="community"/>
        </Tab>

        <Tab Title="Dashboard"
             Icon="dashboard.png">
            <ShellContent
                Title="Dashboard"
                ContentTemplate="{DataTemplate main:Dashboard}"
                Route="dashboard"/>
        </Tab>



    </TabBar>

    <!-- Custom Flyout: only a bottom Logout button -->
    <Shell.FlyoutContent>
        <Grid Padding="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Button Grid.Row="1"
                    Text="Logout"
                    Clicked="OnLogoutClicked"
                    BackgroundColor="#FF3B30"
                    TextColor="White"
                    Padding="16,12"
                    CornerRadius="12"/>
        </Grid>
    </Shell.FlyoutContent>

</Shell>
