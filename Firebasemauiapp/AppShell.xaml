<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="Firebasemauiapp.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Firebasemauiapp.Pages"
    xmlns:main="clr-namespace:Firebasemauiapp.Mainpages"
    xmlns:quest="clr-namespace:Firebasemauiapp.QuestPage"
    xmlns:community="clr-namespace:Firebasemauiapp.CommunityPage"
    xmlns:store="clr-namespace:Firebasemauiapp.StorePage"
    Title="Firebasemauiapp"
    FlyoutBehavior="Disabled">

    <!-- Authentication Pages (No Tabs) -->
    <ShellContent
        x:Name="signin"
        Title="Sign In"
        ContentTemplate="{DataTemplate pages:SignInView}"
        Route="signin"/>
    <ShellContent
        Title="Sign Up"
        ContentTemplate="{DataTemplate pages:SignUpView}"
        Route="signup"/>
    <ShellContent
        Title="Summary"
        ContentTemplate="{DataTemplate main:SummaryView}"
        Route="summary"/>


    <!-- Main App with TabBar -->
    <TabBar Route="main"
            CurrentItem="{x:Reference homeTab}">

        <!-- Home -->
        <Tab x:Name="homeTab"
             Route="home"
             Title="Home"
             Icon="home.png">
            <ShellContent
                Title="Home"
                ContentTemplate="{DataTemplate main:StarterView}"
                Route="starter"/>
        </Tab>

        <!-- Diary: route to SelectMoodPage instead of DiaryView -->
        <Tab Title="Diary"
             Icon="diary.png">
            <ShellContent
                Title="Diary"
                ContentTemplate="{DataTemplate main:SelectMoodPage}"
                Route="diary"/>

        </Tab>

        <!-- Mind Pot (Community) -->
        <Tab Title="Mind Pot"
             Icon="mindpot.png">
            <ShellContent
                Title="Mind Pot"
                ContentTemplate="{DataTemplate community:CommunityPage}"
                Route="community"/>
        </Tab>

        <!-- Store -->
        <Tab Title="Store"
             Icon="store.png">
            <ShellContent
                Title="Store"
                ContentTemplate="{DataTemplate store:StorePage}"
                Route="store"/>
        </Tab>

        <!-- Dashboard -->
        <Tab Title="Dashboard"
             Icon="dashboard.png">
            <ShellContent
                Title="Dashboard"
                ContentTemplate="{DataTemplate main:Dashboard}"
                Route="dashboard"/>
        </Tab>

    </TabBar>

    <!-- Custom Flyout: only a bottom Logout button -->
    <Shell.FlyoutContent>
        <Grid Padding="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Button Grid.Row="1"
                    Text="Logout"
                    Clicked="OnLogoutClicked"
                    BackgroundColor="#FF3B30"
                    TextColor="White"
                    Padding="16,12"
                    CornerRadius="12"/>
        </Grid>
    </Shell.FlyoutContent>

</Shell>
